<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from bicmr.pku.edu.cn/~wenzw/misc.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 14 Sep 2018 01:33:31 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
  <meta name="generator" content="jemdoc, see http://jemdoc.jaboc.net/" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <link rel="stylesheet" href="jemdoc.css" type="text/css" />
  <title>miscellaneous</title>
</head>

<body>
  <table summary="Table for page layout." id="tlayout">
    <tr valign="top">
      <td id="layout-menu">
        <div class="menu-category">Zaiwen Wen</div>
        <div class="menu-item"><a href="index-2.html">Home</a></div>
        <div class="menu-category">Research</div>
        <div class="menu-item"><a href="research.html">Research</a></div>
        <div class="menu-item"><a href="pub.html">Publications</a></div>
        <div class="menu-item"><a href="talks.html">Recent&nbsp;Talks</a></div>
        <div class="menu-item"><a href="softwares.html">Softwares</a></div>
        <div class="menu-item"><a href="seminar.html">Seminars</a></div>
        <div class="menu-item"><a href="group.html">Group</a></div>
        <div class="menu-category">Teaching</div>
        <div class="menu-item"><a href="opt-2018-fall.html">Convex&nbsp;<br /> Optimization&nbsp;<br />
            (2018&nbsp;Fall)</a></div>
        <div class="menu-item"><a href="bigdata2018.html">Algorithms&nbsp;for&nbsp;<br /> Big&nbsp;Data&nbsp;<br />
            Analysis&nbsp;<br />(2018&nbsp;Spring)</a></div>
      </td>
      <td id="layout-content">
        <div id="toptitle">
          <h1>miscellaneous</h1>
        </div>
        <h2>Sparse matrix-dense vector products using intel MKL</h2>
        <p>In Matlab 2013b, dense linear algebra operations have been generally well optimized by using BLAS and LAPACK
          tuned to the CPU processors in use. On the other hand, we have observed that some sparse linear algebra
          operations in Matlab 2013b seem to have not been as highly optimized. In particular, when doing
          multiplications between a sparse matrix and a dense vector or matrix (denoted by
          &lsquo;&lsquo;SpMM&rsquo;&rsquo;) the performance of Matlab's own version of SPMM can differ significantly
          from that of the corresponding routine in Intel's Math Kernel Library <a
            href="http://software.intel.com/en-us/intel-mkl">(MKL)</a>, which is named
          &lsquo;&lsquo;mkl_dcscmm&rsquo;&rsquo;.</p>
        <ul>
          <li>
            <p><a href="code/sfmult.zip">Download Matlab's MEX external interface for mkl_dcscmm</a></p>
          </li>
        </ul>
        <ul>
          <li>
            <p>installation in Ubuntu 12.04 with Matlab 2013b </p>
            <ul>
              <li>
                <p>configure &ldquo;mexopts.sh&rdquo; with link to MKL</p>
              </li>
              <li>
                <p>compile: mex -O -largeArrayDims -output sfmult mkl-sfmult-v1.cpp</p>
              </li>
            </ul>

          </li>
        </ul>
        <ul>
          <li>
            <p>usage:</p>
            <ul>
              <li>
                <p>C = A*B: C = sfmult(A, B, 1)</p>
              </li>
              <li>
                <p>C = A&rsquo;*B: C = sfmult(A, B, 2)</p>
              </li>
            </ul>

          </li>
        </ul>
        <ul>
          <li>
            <p>Numerical Results on A*B, where A is 5000 by 2000 and B is 2000 by 1000 </p>
          </li>
        </ul>
        <div class="codeblock">
          <div class="blockcontent">
            <pre>
seed:  88137586, A*B: err 0.00e+00, matlab-cpu: 0.23, mkl-cpu: 0.10
seed:  87017600, A*B: err 0.00e+00, matlab-cpu: 0.22, mkl-cpu: 0.11
seed:  49049047, A*B: err 0.00e+00, matlab-cpu: 0.23, mkl-cpu: 0.10
</pre>
          </div>
        </div>
        <ul>
          <li>
            <p>Thanks Yin Zhang and Xin Liu</p>
          </li>
        </ul>
        <div id="footer">
          <div id="footer-text">
            Page generated 2018-09-06 21:21:00 CST, by <a href="http://jemdoc.jaboc.net/">jemdoc</a>.
          </div>
        </div>
      </td>
    </tr>
  </table>
</body>

<!-- Mirrored from bicmr.pku.edu.cn/~wenzw/misc.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 14 Sep 2018 01:33:31 GMT -->

</html>